## ER схема[[source](https://drive.google.com/file/d/1HfWG88q3jd5QXCMTtcQ_LGCancWn91yU/view)]

![ER-database schema](https://user-images.githubusercontent.com/21951917/55478417-5ff1bc00-5624-11e9-9f3e-882cb5cf50ae.jpg)

## Список таблиц

**DocumentSupertype** - Список типов документов
1. **id** - первичный ключ
2. **name** - название типа документа

**Document** - Список документов
1. **id** - первичный ключ
2. **doc_id** - Идентификатор документа
3. **text** - Исходный текст документа
4. **is_visiable** - Флаг является ли документа общедовступным или частным
5. **doc_type_id** - Ссылка на тип документа
6. **owner_id** - Ссылка на владельца документа

**PropertyType** - Список типов свойств
1. **id** - первичный ключ
2. **name** - название свойства

**Property** - Список свойств документов
1. **id** - первичный ключ
2. **int_value** - Числовое значение свойства
3. **str_value** - Текстовое знвчение свойства
4. **date_value** - Временное значение свойства
5. **document_id** - Ссылка на документ которому принадлежит свойство
6. **property_type_id** - Ссылка на тип свойства
7. **analyze_source_id** - Ссылка на анализ которым было получено это свойство

**Link** - Спсок ссылок между документами
1. **id** - первичный ключ
2. **doc_from_id** - Ссылка на документ который ссылается 
3. **doc_to_id** - Ссылка на документ на который ссылаются
4. **analyze_source_id** - ссылка на анализ в котором была получена ссылка

**LinkTextPosision** - Список позиций ссылок
1. **id** - первичный ключ
2. **link_id** - Ссылка на ссылку между документами 
3. **textposision_id** - Ссылка на позицию в тексте

**TextPosition** - Спсисок выделенных позиций в тексте
1. **pk** - первичный ключ
2. **start_posotion** - Позиция начала в документе
3. **length** - Длина участка
4. **document_id** - Ссылка на документ а которому принадлежит выделенный текст

**Analyze** - Список всех проведенных анализов
1. **id** - первичный ключ
2. **time** - Время окончание проведения анализа
3. **analyzer_id** - Ссылка на использованный анализатор
4. **user_id** - Ссылка на пользователя который запросил анализ
5. **text_position_id** - Ссылка на выделенную позицию текста
6. **raw_data_id** - Ссылка на текст который анализировался(если использовался предобработанный текст)

**RawData** - Список предобработанных данных на которых проводился какой-то анализ
1. **id** - первичный ключ
2. **analyze_source_id** - ссылка на анализ в котором был получен этот преобразованный текст
3. **text** - Предобработанный текст

**Analyzer** - Список Анализаторов доступных в системе
1. **id** - первичный ключ
2. **version** - Версия анализаторв
3. **name** - Идентификатор анализатора
4. **analyze_type_id** - Тип анализа, который предоставляет анализатор

**AnalyzerType** - Список типов анализа
1. **id** - первичный ключ
2. **name** - Имя проводимого анализа

**CustomUser** - Список пользоваьелей зарегистрированных в системе
1.  **id** - первичный ключ
2.  **password** - Пароль пользователя
3.  **last_login** - Время последнего входа
4.  **is_superuser** - Флаг является пользователь администратором
5.  **username** - Логин пользователя
6.  **email** - Электронная почта пользователя
7.  **is_staff** - Флаг является ли этот акаунт служебным
8.  **is_activate** - Флаг подтвержден ли пользователь
9.  **date_joined** - Дата ренистрации
10. **first_name** - Имя пользователя
11. **last_name** - Фамилия ползователя
12. **owner_pk** - Ссылка на идентификатор владельца

**Organisation** - Список организыций
1. **id** - первичный ключ
2. **name** - Имя организации
3. **registration_date** - Дата ренистрации
4. **is_activated** - Флаг была ли подтверждена организация
5. **owner_id** - Ссылка на идентификатор владельца

**OrganisationMembers** - Отношение между организациями и пользователями
1. **id** - первичный ключ
2. **organisation_id** - Ссылка на организацию
3. **user_id** - Ссылка на пользователя

**DocumentOwner** - Отношение владельца документа
1. **owner_key** - первичный ключ

**DataSource** - Таблица со списком источников документ для периодического сканирования
1. **id** - первичный ключ
2. **source_link** - Ссылка на электронный ресурс с документами для обработки
3. **crawler_name** - Имя crawler который предназначен для сканирования этого ресурса
